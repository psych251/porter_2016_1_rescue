---
title: "Replication of Study 3 by Porter et al. (2016, Psychological Science)"
author: "Ziwen Chen (ziwench@stanford.edu)"
date: "`r format(Sys.time(), '%B %d, %Y')`"
format:
  html:
    toc: true
    toc_depth: 3
---

<!-- Replication reports should all use this template to standardize reporting across projects.  These reports will be public supplementary materials that accompany the summary report(s) of the aggregate results. -->

## Introduction

The experiment to be replicated is Study 3 from Porter et al. (2016). The original study investigated the social cognition of linguistic intergroup bias (LIB), which is the tendency to use abstract language to describe desirable behaviors of in-group members and undesirable behaviors of out-group members, and vice versa. The study believes that the action of using LIB could be used as a cue to infer the speaker's social identity. In general, this study is related to the fields of linguistics, categorization, and social cognition, which are relevant to my research interests in measuring culture via language.

The replicated study will follow a similar pipeline as the original study. Specifically, 168 participants will be recruited online via Prolific and randomly assigned to one of the two conditions (favorable LIB or unfavorable LIB). In both conditions, participants will be asked to read a short paragraph describing a target person's political affiliation and a description provided by an unknown communicator about that person's behavior. The communicator will use favorable LIB in one condition and unfavorable LIB in another condition. After reading the paragraph, participants will be asked to guess the communicator's political affiliation. Participants will also be asked to rate the likelihood that they will be friends with the communicator. After the experiment, participants will be asked to provide their political affiliation information as well.

The main effect of LIB on social categorization will be tested via ANOVA tests. In addition, a three-way ANOVA analysis (i.e., 2 (LIB condition) × 2 (target’s political affiliation) × 3 (participant’s political affiliation). ) will be carried out to test the secondary effect on friendship likelihood.

Below are links to related materials:

- Link to the [Qualtrics Survey](https://stanforduniversity.qualtrics.com/jfe/form/SV_8AhNKUkgXXDVaOa)
- Link to the [GitHub repository](https://github.com/psych251/porter_2016_1_rescue)
- Link to the [Original study](https://github.com/psych251/porter_2016_1_rescue/blob/main/original_paper/porter-et-al-2015-inferring-identity-from-language-linguistic-intergroup-bias-informs-social-categorization.pdf)
- Link to the [Previous Replication](https://rpubs.com/sansiropp/261171)

## Summary of prior replication attempt

### Method differences
Since the first replication failed to obtain the specific wording of questions and instructions from the authors, they came up with their own wording for the questions and instructions. However, while searching for the original codebook in the OSF repository, I discovered some questions that were used in the original material. The table below compares the wording in the original paper to that in the first replication.

|                       | Original                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | First Replication                                                                      |
|-----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
| Political Orientation | I endorse many aspects of conservative political ideology (7-point likert scale, 1= Strongly Disagree).<br /> I endorse many aspects of conservative political ideology (7-point likert scale, 1= Strongly Disagree)<br /> In general, how would you describe your political views on social issues? (7-point likert scale, 1= Very liberal) <br />Generally speaking, do you usually consider yourself a Democrat, a Republican, an Independent, or affliliated with another political party? (Democrat, Republican, Independent, Other political party) | How would you describe your political affiliation? (Democrat, Republican, Independent) |
| Future Behavior       | Please estimate the percentage of future situations in which Peter is likely to help others. (Percentage 0-100) <br />Please estimate the percentage of future situations in which Peter is likely to be rude to others. (Percentage 0-100)                                                                                                                                                                                                                                                                                                          | Not Given                                                                              |
| Friendship Likelihood | How likely is it that you and the communicator would be friends? (5-point likert scale, 1=not at all likely)                                                                                                                                                                                                                                                                                                                                                                                                                                   | How likely would you personally be friends with Peter?                                 |
| Communicator's group  | likely group membership of the communicator (8-point likert scale,  1 = definitely a Democrat) (exact question wording are not given)                                                                                                                                                                                                                                                                                                                                                                                                                                                 | What do you think is the communicator’s political group membership?                     |

Note that a key difference between the original paper and the first replication is the friendship likelihood question. While the original paper asked for participants to estimate their likelihood to be friend with the **communicator**, the replication asked for their likelihood to be friend with the **target**. Apart from this obvious measurement error, it is unclear whether the wording of the other questions might contribute to the failure of the first replication. 

Furthermore, the author of the initial replication pointed out that factors such as a lack of attention check and potential memory loss may result in failure in passing the manipulation check, which would then lead to replication failure in general. The present attempt has addressed these issues.

### Sampling Differences
The original paper recruited 145 participants (mean age= 30.91). Participants’ self-reported political-party affiliations were as follows: 41.4% Democrat, 17.2% Republican, 33.1% Independent, 3.4% “other,” and 4.8% not reported. Seventeen participants were excluded from the analysis.

The first replication recruited 168 participants (mean age = 33.41), based on their power analysis results. Participants’ self-reported political-party affiliations were as follows: 41.4% Democrat, 23.1% Republican, 35.5% Independent. All participants finished all the portions of the study, and none of them was excluded from data analyses.

In terms of size and demographic distribution, the first replication's sample is generally fairly similar to that of the original research. The only difference is that there were no data exclusion in the first replication than in the original paper; this could be because the first replication did not include a "other" option for the political affiliation question, which was included in the original study. Failure to include a "other" option reduces the exclusion rate in the first replication compared to the original study.

### Analysis Differences
The original article did not share their specific R code,so we cannot fully tell if there are any analysis differences.

## Methods

### Power Analysis
The main effect of the original study is stated as follow:

>Participants in the favorable-LIB condition, relative to those in the unfavorable-LIB condition, were significantly more likely to believe that the communicator and target shared political-group membership, F(1, 121)= 8.67, p < .01, d = 0.51.

For Power Analysis in G*Power, I used the following parameters:
  - Test Family: F tests.
  - Statistical Test: ANOVA: Fixed effects, special, main effects and interactions 
  - Type of Power Analysis: A priori (for sample size calculation).
  - Effect Size (f): 0.255 (converted from Cohen's d to Cohen's f)
  - Alpha Level: 0.05
  - Number of Groups: 2
  - Numerator DF: 1

The sample size is estimated to be 123 for 80% power, 164 for 90% power, and 202 for 95% power. We decided to take 168 samples because the original study recruited 145 samples and the first replication recruited 168 samples. It should be noted that this power analysis is based on the main effect, and there is a risk of under-powering the secondary effect calculated using the three-way ANOVA. However, because the first replication failed to replicate both the manipulation and the main effect, we decided to concentrate on the main effect in this study.

### Planned Sample
The sample in the original research is described as follows:

>One hundred forty-five participants (mean age = 30.91 years) were recruited from MTurk .com. Participants’ self-reported political-party affiliation were as follows: 41.4% Democrat, 17.2% Republican, 33.1% Independent, 3.4% “other,” and 4.8% not reported. Five participants who did not complete one of the dependent measures, 5 participants who reported their political-party affiliation as “other,” and 7 participants who did not report their political-party affiliation were not included in analyses.

We decided to recruit 168 participants for the reasons stated in the power analysis section.

### Materials
The following passage describes the materials used in the original study:

>Participants were asked to read a passage and then respond to questions. In the Republican-target condition, the passage indicated that Peter had voted for John McCain; in the Democratic-target condition, Peter had voted for Barack Obama. In the second part of the passage, participants were again provided with an unknown communicator’s description of Peter’s helpful and rude behaviors. Following Wigboldus et al. (2000), we included a description of one discrete episode, expressed in the present tense, for each type of behavior (for the full descriptions, see Table S1 in the Supplemental Material available online). For example, the description of helpful behavior in the favorable-LIB condition was written in abstract language and read as follows: “On one occasion, there is a person in a wheelchair who needs assistance getting up a ramp. Peter reaches for the handles of the wheelchair. Peter is helpful.” In the unfavorable-LIB condition, helpful behavior was described concretely: “On one occasion, there is a person in a wheelchair who needs assistance getting up a ramp. Peter reaches for the handles of the wheelchair. Peter pushes the wheelchair up the ramp.”
After reading the passage, participants indicated the likely group membership of the communicator on an 8-point scale anchored by 1, definitely a Democrat, and 8, definitely a Republican. They then rated the likelihood that they would be friends with the communicator, using a 5-point scale ranging from 1, it is not at all likely, to 5, it is extremely likely. Finally, participants completed the manipulation-check items and a demographic questionnaire on which they reported their political-party affiliation and political ideology.

We'll use the same scale and sequence as in the original passage. However, given that the Obama-McCain presidential election took place in 2008, our manipulation may be ineffective. Instead, we decide to provide more generalized group information by stating that Peter has previously voted for the Democratic or Republican Parties.

### Procedure	
Building on the material discussed earlier, the procedure for the questionnaire is as follows: 
1. Inform participants of the target social group's membership. 
2. Present the communicator's description of the target. 
3. Participants make inferences about the future behavior of the target, the communicator's group affiliation, and the likelihood of being friends with the communicator. 
4. Participants complete a demographic questionnaire.

### Controls
Given the previous replication's failure and the subtlety of the manipulation, we will add a new attention check question post-inference queries. Participants will be asked, "Which statement correctly describes Peter's behavior on the previous page?" Possible answers include: "Peter is always polite and attentive," "Peter assists someone in a wheelchair but is rude by yawning and ignoring his colleague," "Peter never engages with work colleagues," and "Peter refuses to help a person in a wheelchair." The answer should be pretty obvious if the participant read the material.

### Analysis Plan
We will conduct three sets of data analyses to replicate the results:

1. **LIB Manipulation Check**: This analysis aims to determine if favorable or unfavorable language-induced bias (LIB) conditions lead to different predictions about the target's future behavior (helpful or rude). The following analyses will be performed:
  - Factorial ANOVAs to estimate the effects of LIB condition (2 levels), target's political affiliation (2 levels)
2. **Social Category Inference**: The focus here is to examine if the LIB conditions influence inferences about the likelihood of shared category membership between the target and communicator. The analyses include:
  - Factorial ANOVAs to estimate the effects of LIB condition (2 levels), target's political affiliation (2 levels), and participant's political affiliation (3 levels: Democrat, Republican, Independent).

- Supplementary t-tests and calculation of Cohen's d effect size for subgroup analyses.
3. **Friendship Likelihood**: We will assess participants' likelihood of becoming friends with the communicator using:
  - Factorial ANOVAs to estimate the effects of LIB condition (2 levels), target's political affiliation (2 levels), and participant's political affiliation (3 levels: Democrat, Republican, Independent).

Apart from the major factorial ANOVAs, for each set, we will also perform supplementary t-tests and calculation of Cohen's d effect size for subgroup analyses.

### Differences from Original Study and 1st replication

There are three key differences between the current project and the original study, as well as its first replication:

1. **Change in Wording for Disclosing Target Social Group Membership**: We used "Peter voted for the Democratic or Republican Party in the past" instead of "Peter voted for Obama vs. McCain" to indicate Peter's group information.

2. **Inclusion of Attention Check Questions**: Attention check questions have been added in the post-test questionnaire. See description in the "Control" section.

3. **Put the material and question on the same page**: To avoid potential memory loss, we now put the material as well as the questions on the same page so that participants could refer to the material while answering questions.

### Methods Addendum (Post Data Collection)

You can comment this section out prior to final report with data collection.

#### Actual Sample
  Sample size, demographics, data exclusions based on rules spelled out in analysis plan

#### Differences from pre-data collection methods plan
  Any differences from what was described as the original plan, or “none”.


## Results
### Data preparation

Data preparation following the analysis plan.
	
```{r,message=FALSE, warning=FALSE}
### Data Preparation
library(dplyr)
library(tidyr)
library(readr)
library(ggplot2)

# Read the data
data_path = "../data"
data <- read_csv(file.path(data_path, "pilot_b_anonymized.csv"))

# Revert wide to long, change variable names
data_cleaned <- data %>%
  rename(future_help1 = future_help1_1,
         future_help2 = future_help2_1,
         future_help3 = future_help3_1,
         future_help4 = future_help4_1,
         future_rude1 = future_rude1_1,
         future_rude2 = future_rude2_1,
         future_rude3 = future_rude3_1,
         future_rude4 = future_rude4_1) %>%
  pivot_longer(cols = c(starts_with("future_help"), starts_with("future_rude"),
                        starts_with("pol_cate"), starts_with("likelyfriends")),
               names_to = c(".value", "condition"),
               names_sep = "(?<=\\D)(?=\\d)",
               values_drop_na = TRUE) %>%
  mutate(lib_cate = if_else(condition %in% c(1, 3), "F", "U"),
         group_cate = if_else(condition %in% c(1, 2), "R", "D"),
         shared_group = if_else(condition %in% c(1, 2), 8 - pol_cate, pol_cate))

summary_data <- data_cleaned %>%
  group_by(lib_cate, group_cate) %>%
  summarise(
    mean = mean(shared_group),
    se = sd(shared_group) / sqrt(n()))

# not used for this version: remove row with attention value that is not 2

```

### Confirmatory analysis
#### Manipulation Check
```{r, message=FALSE, warning=FALSE}
# t test: LIB on future behavior
print(t.test(future_rude~lib_cate, data = data_cleaned))
print(t.test(future_help~lib_cate, data = data_cleaned))

# one way anova: LIB on future behavior
res.aov <- aov(future_help ~ lib_cate, data = data_cleaned)
print(summary(res.aov))
res.aov <- aov(future_rude ~ lib_cate, data = data_cleaned)
print(summary(res.aov))

# two way anova: LIB, target group, future behavior
res.aov2 <- aov(future_help ~ lib_cate + group_cate + lib_cate:group_cate, data = data_cleaned)
summary(res.aov2)

res.aov2 <- aov(future_rude ~ lib_cate + group_cate + lib_cate:group_cate, data = data_cleaned)
summary(res.aov2)
```

#### Main Effect
```{r}
## plot
ggplot(summary_data, aes(x = group_cate, y = mean,  fill = lib_cate)) +
  geom_bar(stat = "identity", position = position_dodge()) +
  geom_errorbar(aes(ymin = mean - se, ymax = mean + se), 
                width = 0.2, 
                position = position_dodge(0.9))+
  labs(x = "Political Group", y = "Likelihood of Shared Group Membership") +
  theme_minimal()

## one way anova: LIB on shared group membership
res.aov <- aov(shared_group ~ lib_cate, data = data_cleaned)
print(summary(res.aov))

## three way anova
res.aov3 <- aov(shared_group ~ lib_cate + group_cate + polid, data = data_cleaned)
print(summary(res.aov3))

## t test
# print(t.test(shared_group~lib_cate, data = data_cleaned[data_cleaned$group_cate == 'D', ]))
# print(t.test(shared_group~lib_cate, data = data_cleaned[data_cleaned$group_cate == 'R', ]))
```

#### Secondary Effect
```{r}
res.aov3 <- aov(likelyfriends ~ lib_cate + group_cate + polid, data = data_cleaned)
print(summary(res.aov3))
```
### Exploratory analyses

Any follow-up analyses desired (not required).  

## Discussion

## Mini meta analysis
Combining across the original paper, 1st replication, and 2nd replication, what is the aggregate effect size? 

### Summary of Replication Attempt

Open the discussion section with a paragraph summarizing the primary result from the confirmatory analysis and the assessment of whether it replicated, partially replicated, or failed to replicate the original result.  

### Commentary

Add open-ended commentary (if any) reflecting (a) insights from follow-up exploratory analysis, (b) assessment of the meaning of the replication (or not) - e.g., for a failure to replicate, are the differences between original and present study ones that definitely, plausibly, or are unlikely to have been moderators of the result, and (c) discussion of any objections or challenges raised by the current and original authors about the replication attempt.  None of these need to be long.

There were several confusing problems with the original studies that I don't know how to explain:
1. The original study use different likert scales for the identical research question between studies. In study 1, when estimating the likelihood that the communicator was either a Democrat or a Republican (the key construct of interest), Ratings were made on a 7-point scale, anchored by 1, definitely a Republican, and 7, definitely a Democrat. However, in study 3, the likely group membership of the communicator was estimated on an 8-point scale anchored by 1, definitely a Democrat, and 8, definitely a Republican. The authors did not make any justifications on why they decide to change scales.

